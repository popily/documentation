<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Popily API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;,&quot;javascript&quot;,&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li>API Version 1.0</li>
            <li>API Docs Version 1.0</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Popily makes it it easy to embed customer-facing analytics into your application. We have client libraries in Python and JavaScript (more coming soon!) that interact with a REST API, so you can connect to your data, ask the API for the information you want, and drop cool interactive visualizations into your application &ndash; all with just a few lines of code. </p>

<h1 id="blindingly-quick-start">Blindingly Quick Start</h1>

<p>Check out <a href="https://github.com/popily/popily-js">the intro to our JavaScript API</a>. Add data, get charts. Presto! </p>

<h1 id="still-pretty-quick-start">Still Pretty Quick Start</h1>

<p>Just send some data, pick a column to visualize, and embed the results. You can embed Popily visualizations in an iFrame, or use our <a href="https://github.com/popily/popily-js">JavaScript library</a> to build responsive, interactive dashboards in a few lines of code.</p>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API KEY'</span><span class="p">)</span>

<span class="c"># Add a source</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'Column 1'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'number'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'Column 2'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s">'http://url-of-your-csv.csv'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c"># Get some insights</span>
<span class="n">insights</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="n">source</span><span class="p">[</span><span class="s">'id'</span><span class="p">])</span>

<span class="c"># Embed the insight with an iframe</span>
<span class="n">embed_url</span> <span class="o">=</span> <span class="n">insights</span><span class="p">[</span><span class="s">'results'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'embed_url'</span><span class="p">]</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API KEY'</span><span class="p">)</span>

<span class="c1">// Add a source</span>
<span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">'column_header'</span><span class="p">:</span> <span class="s1">'Column 1'</span><span class="p">,</span>
        <span class="s1">'data_type'</span><span class="p">:</span> <span class="s1">'number'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">'column_header'</span><span class="p">:</span> <span class="s1">'Column 2'</span><span class="p">,</span>
        <span class="s1">'data_type'</span><span class="p">:</span> <span class="s1">'category'</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">addSource</span><span class="p">(</span><span class="s1">'http://url-of-your-csv.csv'</span><span class="p">,</span> <span class="p">{</span><span class="na">columns</span><span class="p">:</span><span class="nx">columns</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span> 
<span class="p">});</span>

<span class="c1">// Get some insights</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">get_insights</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">iframe</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">'iframe'</span><span class="p">);</span>
    <span class="nx">iframe</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">insights</span><span class="p">.</span><span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">embed_url</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">iframe</span><span class="p">);</span>     
<span class="p">});</span>
</code></pre>

<h1 id="concepts">Concepts</h1>

<p>We have four big concepts in Popily that you&rsquo;ll use throughout your journey with our API.</p>

<ol>
<li>Data sources - Wherever your data comes from (a database, CSV file, etc).</li>
<li>Columns - Each source has columns, which are like database columns. (If you are working with JSON, we&rsquo;ll flatten the properties into something we can treat like columns)</li>
<li>Insights - A relationship between columns. Like average employee salary over time.</li>
<li>Filters - A &ldquo;slice&rdquo; of the data (like a <code class="prettyprint">WHERE</code> clause in a SQL query). Like average salary for employee John Smith over time.</li>
</ol>

<p>With that out of the way, let&rsquo;s get started.</p>

<h1 id="authentication">Authentication</h1>

<p>You authenticate each request an API key. Soon you&rsquo;ll get an API get as soon as you create your account. For now though, you need to email us at awesome@popily.com to as for one.</p>

<h2 id="api-key">API key</h2>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>
<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API KEY'</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// With the browser client</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API KEY'</span><span class="p">);</span>
</code></pre>

<p>You authenticate with Popily using a token passed in the Authorization HTTP header. If you haven&rsquo;t been assigned a token, just contact us and we&rsquo;ll hook you up. <strong>We strongly recommend keeping this token to yourself.</strong></p>

<h1 id="interacting-with-the-api">Interacting with the API</h1>

<h2 id="status-codes">Status codes</h2>

<table><thead>
<tr>
<th>Status Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>201</td>
<td>Resource Created</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
</tr>
</tbody></table>

<h2 id="making-requests">Making requests</h2>

<p>Popily follows RESTful API patterns.</p>

<ul>
<li><code class="prettyprint">GET</code> - Retrieve resources</li>
<li><code class="prettyprint">POST</code> - Create new resources</li>
<li><code class="prettyprint">PUT</code> - Modify existing resources</li>
<li><code class="prettyprint">DELETE</code> - Remove resources</li>
</ul>

<p><code class="prettyprint">GET</code> arguments must be passed as params and <code class="prettyprint">POST</code> arguments must be passed as JSON with correct Content-Type headers. Most of the time you won&rsquo;t need to worry about any of this, as the actual request formatting is handled by the client library in your language of choice. </p>

<p><strong>If you want to use a language we haven&rsquo;t written a client for yet, let us know!</strong> We&rsquo;d love to help, either by supporting you in building an API client, or creating it ourselves.</p>

<h2 id="pagination">Pagination</h2>

<p>Popily uses pagination when <code class="prettyprint">GET</code> requests returns a list of objects (e.g. insights, sources). To get all objects in a list of objects, you will need to paginate through the list. Every list response has a <code class="prettyprint">prev</code> and <code class="prettyprint">next</code> property just for this purposes. For example:</p>
<pre class="highlight plaintext"><code>{
  // list of response objects
  "results": [], 
  "next": "https://popily.com/path/to/next/",
  "previous": "https://popily.com/path/to/prev/"
}
</code></pre>

<h1 id="sources">Sources</h1>

<p>The <code class="prettyprint">sources</code> endpoint can be used to create new data sources or interact with existing sources. Each <code class="prettyprint">source</code> is associated with a <code class="prettyprint">user</code> by its <code class="prettyprint">created_by</code> property. By default each <code class="prettyprint">source</code> you create is associated with you, but you can also assign <code class="prettyprint">source</code> objects to <code class="prettyprint">user</code> objects you create. </p>

<h2 id="create-source">Create source</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily</span>

<span class="n">popily_api</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API TOKEN'</span><span class="p">)</span>

<span class="c"># Give it a title (optional)</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">'DC Comics Data'</span>

<span class="c"># Define the column types</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'name'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'rowlabel'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'ALIGN'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'EYE'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'HAIR'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'SEX'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="c"># Example connection to a database column called 'characters'</span>
<span class="n">connection_string</span> <span class="o">=</span> <span class="s">'mysql://username:password@host:port/database'</span>
<span class="n">query</span> <span class="o">=</span> <span class="s">'SELECT * FROM characters'</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily_api</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span>
                        <span class="n">connection_string</span><span class="o">=</span><span class="n">connection_string</span><span class="p">,</span>
                        <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">sourceData</span> <span class="o">=</span> <span class="p">{};</span>

<span class="c1">// Give it a title (optional)</span>
<span class="nx">sourceData</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'DC Comics Data'</span><span class="p">;</span>

<span class="c1">// Define the column types</span>
<span class="nx">sourceData</span><span class="p">[</span><span class="s1">'columns'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">'column_header'</span><span class="p">:</span> <span class="s1">'name'</span><span class="p">,</span>
        <span class="s1">'data_type'</span><span class="p">:</span> <span class="s1">'rowlabel'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">'column_header'</span><span class="p">:</span> <span class="s1">'ALIGN'</span><span class="p">,</span>
        <span class="s1">'data_type'</span><span class="p">:</span> <span class="s1">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">'column_header'</span><span class="p">:</span> <span class="s1">'EYE'</span><span class="p">,</span>
        <span class="s1">'data_type'</span><span class="p">:</span> <span class="s1">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">'column_header'</span><span class="p">:</span> <span class="s1">'HAIR'</span><span class="p">,</span>
        <span class="s1">'data_type'</span><span class="p">:</span> <span class="s1">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">'column_header'</span><span class="p">:</span> <span class="s1">'SEX'</span><span class="p">,</span>
        <span class="s1">'data_type'</span><span class="p">:</span> <span class="s1">'category'</span>
    <span class="p">}</span>
<span class="p">];</span>

<span class="c1">// Example connection to a database column called 'characters'</span>
<span class="nx">sourceData</span><span class="p">[</span><span class="s1">'connection_string'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'mysql://username:password@host:port/database'</span><span class="p">;</span>
<span class="nx">sourceData</span><span class="p">[</span><span class="s1">'query'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'SELECT * FROM characters'</span><span class="p">;</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">addSource</span><span class="p">(</span><span class="nx">sourceData</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the source</span>
<span class="p">});</span>
</code></pre>

<p>As soon as you add a <code class="prettyprint">source</code>, Popily will automatically start performing the calculations required to generate lots of <code class="prettyprint">insight</code> objects. <strong>Note: sources are processed asynchronously</strong>, so depending on the size of your data, this might take a few seconds to a few minutes. You can browse your <code class="prettyprint">source</code> via the API (more on that below), or through the user interface at <a href="https://popily.com">popily.com</a>. </p>

<p>Once you add a source you can tell Popily to refresh the data on a schedule (like every hour or every day), so the charts you embed in your application stay up to date.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>Full URL where the data file or API endpoint can be accessed.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Human-readable name of the source.</td>
</tr>
<tr>
<td>columns</td>
<td>JSON object</td>
<td><a href="#data-types">A list of column headers and their data types</a>.</td>
</tr>
<tr>
<td>sheetname</td>
<td>string</td>
<td>Used when the data source is an Excel file. Denotes the name of the sheet to use.</td>
</tr>
<tr>
<td>connection_string</td>
<td>string</td>
<td>Full connection string to your MySQL or Postgres database.</td>
</tr>
<tr>
<td>query</td>
<td>string</td>
<td>The SQL query you&rsquo;d like to run on your database.</td>
</tr>
</tbody></table>

<h2 id="sending-files">Sending files</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily</span>

<span class="n">popily_api</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API TOKEN'</span><span class="p">)</span>

<span class="n">your_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/path/to/your/file.csv'</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily_api</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">file_obj</span><span class="o">=</span><span class="n">your_file</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js </span>
<span class="c1">// Note file upload isn't allowed from the browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="nx">filePath</span> <span class="o">=</span> <span class="s1">'/path/to/your/file.csv'</span>
<span class="kd">var</span> <span class="nx">sourceData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">data</span><span class="p">:</span> <span class="nx">filePath</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">addSource</span><span class="p">(</span><span class="nx">sourceData</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the source</span>
<span class="p">});</span>
</code></pre>

<p>In addition to creating data <code class="prettyprint">sources</code> from file URLs and databases, you can also upload files directly to Popily. </p>

<h2 id="source-data-types">Source data types</h2>

<p>All source resources in Popily must contain a description of the type of data in each column. Popily understands more than just integers and strings, it can also work with higher-level concepts like categories, US states or currency. We’re always adding to this list, but these are the available types as of today.</p>

<p>Note: You only need to define the columns you care about. Popily will ignore everything else.</p>

<table><thead>
<tr>
<th>Data Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>category</td>
<td>A column containing categorical values.</td>
<td>Apple, Orange, Pear</td>
</tr>
<tr>
<td>numeric</td>
<td>A column of numeric values.</td>
<td>320, 2, 23.10</td>
</tr>
<tr>
<td>currency</td>
<td>A column of numeric values as currencies.</td>
<td>$320, $2, $23.10</td>
</tr>
<tr>
<td>datetime</td>
<td>A column of datetime or timestamps.</td>
<td>12/12/2015, 2/3/15, January 6, 2015</td>
</tr>
<tr>
<td>country</td>
<td>A column of countries.</td>
<td>Spain, France, England</td>
</tr>
<tr>
<td>state</td>
<td>A column of US states.</td>
<td>Arizona, Maine, Oregon</td>
</tr>
<tr>
<td>coordinate</td>
<td>A column of latitude and longitude coordinate pairs.</td>
<td>[43.522, 23.521]</td>
</tr>
<tr>
<td>zipcode</td>
<td>A column of US Zip codes.</td>
<td>42351</td>
</tr>
<tr>
<td>rowlabel</td>
<td>A column of non-categorical uniquely or semi-uniquely identifying each individual row</td>
<td>Steve Jobs, Dunder Muffin, Wendy Jones</td>
</tr>
</tbody></table>

<h2 id="source-status">Source status</h2>

<p>When a <code class="prettyprint">source</code> is added to Popily, our &ldquo;Mechanical <a href="https://en.wikipedia.org/wiki/John_Tukey">Tukey</a>&rdquo; technology starts processing the data. You can check the status of any <code class="prettyprint">source</code> by retrieving it from the API.</p>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>
<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR TOKEN'</span><span class="p">)</span>
<span class="c"># Get by slug</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_source</span><span class="p">(</span><span class="s">'your-source-slug'</span><span class="p">)</span>
<span class="c"># or get by id</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_source</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Get by slug</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getSource</span><span class="p">(</span><span class="s1">'your-source-slug'</span><span class="p">)</span>
<span class="c1">// or get by id</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getSource</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
</code></pre>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>inspecting</td>
<td>Examining new source.</td>
</tr>
<tr>
<td>calculating</td>
<td>Processing new source.</td>
</tr>
<tr>
<td>reinspecting</td>
<td>Reprocessing source after change.</td>
</tr>
<tr>
<td>Adding</td>
<td>Merging a source.</td>
</tr>
<tr>
<td>error</td>
<td>Something went wrong.</td>
</tr>
</tbody></table>

<h2 id="exploring-your-data-sources">Exploring your data sources</h2>

<blockquote>
<p>Example API response after creating a new source</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "id": 432,
    "explore_path": "/explore/source/dc-wikia-data-csv-3/discoveries/"
}
</code></pre>

<p>We’re exploring this data through the API, but once a data <code class="prettyprint">source</code> has been added, you can also explore it through the Popily user interface. In the API response after you create a new data source, you’ll see an <code class="prettyprint">explore_path</code> property, which is where you’ll find your new source via the interface.</p>

<h2 id="list-sources">List sources</h2>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>
<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR TOKEN'</span><span class="p">)</span>

<span class="c"># Get source list</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_sources</span><span class="p">()</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Get source list</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getSources</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">sources</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="nx">sources</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// source</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{"count": 1,
 "next": "http://popily.com/api/sources/?page=2",
 "previous": None,
 "results": [{"columns": [{"column_header": "SEX",
             "data_type": "category",
             "id": 29413,
             "score": 0.0},
            {"column_header": "HAIR",
             "data_type": "category",
             "id": 29412,
             "score": 0.0},
            {"column_header": "EYE",
             "data_type": "category",
             "id": 29411,
             "score": 0.0},
            {"column_header": "ALIGN",
             "data_type": "category",
             "id": 29410,
             "score": 0.0},
            {"column_header": "name",
             "data_type": "rowlabel",
             "id": 29409,
             "score": 0.0}],
             "created_by": 3,
             "description": None,
             "explore_path": "/explore/source/dc-wikia-data-3/discoveries/",
             "id": 2287,
             "sheetname": None,
             "slug": "dc-wikia-data-3",
             "status": "inspecting",
             "title": "DC Comics Data",
             "url": None}]
}
</code></pre>

<p>Of course if you prefer the API, you can explore the columns and <code class="prettyprint">insight</code> objects associated with your <code class="prettyprint">source</code> that way as well. If you&rsquo;d like to get a list of all your <code class="prettyprint">source</code> objects, here&rsquo;s how:</p>

<h3 id="api-response-objects">API response objects</h3>

<ul>
<li><strong>count:</strong> Number of source resources</li>
<li><strong>next:</strong> Pagination marker</li>
<li><strong>previous:</strong> Pagination marker</li>
<li><strong>results:</strong> (see <a href="#get_source">get_source</a> for full explanation)</li>
</ul>

<h1 id="insights">Insights</h1>

<p>Our Mechanical Tukey engine performs a bunch of calculations that represent the relationships between columns in your <code class="prettyprint">source</code>. In Popily, each of these relationships is called an <code class="prettyprint">insight</code>.</p>

<h2 id="list-insights">List insights</h2>

<p>You can get lists of <code class="prettyprint">insight</code> objects for a given <code class="prettyprint">source</code>.</p>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR TOKEN'</span><span class="p">)</span>

<span class="c"># Get all insights for a source by its id</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="mi">324442</span><span class="p">)</span>

<span class="c"># Get all insights for a source by its slug</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="s">'some-source-slug'</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Get all insights for a source by its id</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="mi">324442</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insights</span>
<span class="p">});</span>

<span class="c1">// Get all insights for a source by its slug</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="s1">'some-source-slug'</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insights</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "count": 30,
    "previous": null,
    "results": [{
        "title": "Number of ALIGN grouped by SEX",
        "x_label": "ALIGN",
        "y_label": "Number of Records",
        "filters_key": "",
        "source": 429,
        "insight_type_category": "count",
        "id": 249985,
        "z_label": "",
        "insight_type": "count_by_category_by_category"
    }],
    "next": "https://popily.com/api/insights/?source=429&amp;page=2"
}
</code></pre>

<p>Retrieves a list of insights for a source resource.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source</td>
<td>integer or string</td>
<td>id or slug for the source.</td>
</tr>
<tr>
<td>columns</td>
<td>list</td>
<td>List of column names in a source.</td>
</tr>
<tr>
<td>insight_actions</td>
<td>list</td>
<td>The type of analysis used in the insights.</td>
</tr>
</tbody></table>

<h2 id="selecting-specific-column-relationships">Selecting specific column relationships</h2>

<p>Most of the time you&rsquo;ll want to filter your list of <code class="prettyprint">insights</code> to those that represent the relationship between specific columns of interest.</p>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR TOKEN'</span><span class="p">)</span>

<span class="c"># Get all insights that represent the relationship between Column A and Column B</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'Column A'</span><span class="p">,</span>
  <span class="s">'Column B'</span>
<span class="p">]</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="s">'some-source-slug'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'Column A'</span><span class="p">,</span>
  <span class="s1">'Column B'</span>
<span class="p">];</span>

<span class="c1">// Get all insights that represent the relationship between Column A and Column B</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="s1">'some-source-slug'</span><span class="p">,</span> <span class="p">{</span><span class="na">columns</span><span class="p">:</span> <span class="nx">columns</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insights</span>
<span class="p">});</span>
</code></pre>

<h2 id="limiting-by-analysis">Limiting by analysis</h2>

<p>You can further limit your list of <code class="prettyprint">insight</code> objects by the type of analysis Popily performed. We call this analysis an <code class="prettyprint">insight_action</code>.</p>

<p>An <code class="prettyprint">insight_action</code> is an aggregation (like a count, sum or average) or other analysis (like a comparison) performed for a particular column combination. </p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>average</td>
<td>Average of a number</td>
</tr>
<tr>
<td>sum</td>
<td>Total of a number</td>
</tr>
<tr>
<td>count</td>
<td>Number of rows, used for categories and dates</td>
</tr>
<tr>
<td>ratio</td>
<td>Percentage of rows, used for categories and dates</td>
</tr>
<tr>
<td>comparison</td>
<td>Compares two numbers, produces scatterplots</td>
</tr>
<tr>
<td>geo</td>
<td>Geospatial information, produces maps</td>
</tr>
</tbody></table>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR TOKEN'</span><span class="p">)</span>

<span class="c"># Get all insights that represent the relationship between Column A and Column B</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'Column A'</span><span class="p">,</span>
  <span class="s">'Column B'</span>
<span class="p">]</span>

<span class="c"># Let's say Column A is a number. We only want insights that look at the average</span>
<span class="c"># of Column A.</span>
<span class="n">insight_actions</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'average'</span>
<span class="p">]</span>

<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="s">'some-source-slug'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> 
                        <span class="n">insight_actions</span><span class="o">=</span><span class="n">insight_actions</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Get all insights that represent the relationship between Column A and Column B</span>
<span class="kd">var</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'Column A'</span><span class="p">,</span>
  <span class="s1">'Column B'</span>
<span class="p">];</span>

<span class="c1">// Let's say Column A is a number. We only want insights that look at the average</span>
<span class="c1">// of Column A.</span>
<span class="kd">var</span> <span class="nx">insightActions</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'average'</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span><span class="na">columns</span><span class="p">:</span> <span class="nx">columns</span><span class="p">,</span> <span class="na">insight_actions</span><span class="p">:</span> <span class="nx">insightActions</span><span class="p">};</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="s1">'some-source-slug'</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insights</span>
<span class="p">});</span>
</code></pre>

<h2 id="filtering-your-data">Filtering your data</h2>

<p>You can also request &ldquo;slices&rdquo; of the returned <code class="prettyprint">insight</code> objects by applying filters to the columns you request from the API. </p>

<p>This is a powerful feature that gives you fine-grained control over how your data is presented. At the moment filters are limited to category columns, but coming soon we&rsquo;ll have support for datetime and number columns as well &ndash; for example filtering only to show only values that fall between March 1, 2016 and March 7, 2016 or filtering to show only values that are greater than 0. </p>

<p>The format of a filter is always the same:</p>

<p><code class="prettyprint">{ column: &#39;column name&#39;, values: [&#39;value 1&#39;, &#39;value 2&#39;], op: &#39;eq&#39; }</code></p>

<p>The <code class="prettyprint">op</code> property stands for &ldquo;operation&rdquo; and is optional. It defaults to &lsquo;eq&rsquo; (which stands for &ldquo;equals&rdquo;). Support for additional operations like &#39;gt&rsquo; (greater than), &#39;lt&rsquo; (less than), etc are coming soon.</p>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR TOKEN'</span><span class="p">)</span>

<span class="c"># Get all insights that represent the relationship between Column A and Column B</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'Column A'</span><span class="p">,</span>
  <span class="s">'Column B'</span>
<span class="p">]</span>

<span class="c"># Let's say Column A is a number. We only want insights that look at the average</span>
<span class="c"># of Column A.</span>
<span class="n">insight_actions</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'average'</span>
<span class="p">]</span>

<span class="c"># Let's say Column B is a category and it's values are colors. We only want to </span>
<span class="c"># show values associated with red and green. </span>
<span class="n">filters</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s">'column'</span><span class="p">:</span> <span class="s">'Column B'</span><span class="p">,</span>
    <span class="s">'values'</span><span class="p">:</span> <span class="p">[</span><span class="s">'red'</span><span class="p">,</span> <span class="s">'green'</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>

<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="s">'some-source-slug'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="n">average</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Get all insights that represent the relationship between Column A and Column B</span>
<span class="kd">var</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'Column A'</span><span class="p">,</span>
  <span class="s1">'Column B'</span>
<span class="p">];</span>

<span class="c1">// Let's say Column A is a number. We only want insights that look at the average</span>
<span class="c1">// of Column A.</span>
<span class="kd">var</span> <span class="nx">insightActions</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'average'</span>
<span class="p">];</span>

<span class="c1">// Let's say Column B is a category and it's values are colors. We only want to </span>
<span class="c1">// show values associated with red and green. </span>
<span class="kd">var</span> <span class="nx">filters</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="s1">'column'</span><span class="p">:</span> <span class="s1">'Column B'</span><span class="p">,</span>
    <span class="s1">'values'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'green'</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">columns</span><span class="p">:</span> <span class="nx">columns</span><span class="p">,</span> 
    <span class="na">insight_actions</span><span class="p">:</span> <span class="nx">insightActions</span><span class="p">,</span>
    <span class="na">filters</span><span class="p">:</span> <span class="nx">filters</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="s1">'some-source-slug'</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insights</span>
<span class="p">});</span>
</code></pre>

<h2 id="getting-single-insights">Getting single insights</h2>

<p>Sometimes you just want one <code class="prettyprint">insight</code>, not a list. This can be achieved in two ways. The first builds on the list examples from above. There is only one <code class="prettyprint">insight_action</code> (aka type of analysis) performed on any given combination of columns. So, say you had two columns, Column A, a number, and Column B, a category. Popily will calculate the average of Column A for each category in Column B. If you ask for these two columns with the <code class="prettyprint">insight_action</code> of &ldquo;average,&rdquo; you can be sure you&rsquo;ll get one result.</p>

<p>In this situation, you can include <code class="prettyprint">single</code> in your request to let Popily know that you only want one object, not a list. <strong>Note</strong>: you can add <code class="prettyprint">single</code> to any request, even if you&rsquo;re not sure that request will only return one object. If more than one <code class="prettyprint">insight</code> would normally be returned, Popily will choose the one it thinks is most interesting. </p>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">popily_api</span> <span class="kn">import</span> <span class="n">Popily</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR TOKEN'</span><span class="p">)</span>

<span class="c"># Get all insights that represent the relationship between Column A and Column B</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'Column A'</span><span class="p">,</span>
  <span class="s">'Column B'</span>
<span class="p">]</span>

<span class="c"># Let's say Column A is a number. We only want insights that look at the average</span>
<span class="c"># of Column A.</span>
<span class="n">insight_actions</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'average'</span>
<span class="p">]</span>

<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="s">'some-source-slug'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="n">average</span><span class="p">,</span> <span class="n">single</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Get all insights that represent the relationship between Column A and Column B</span>
<span class="kd">var</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'Column A'</span><span class="p">,</span>
  <span class="s1">'Column B'</span>
<span class="p">];</span>

<span class="c1">// Let's say Column A is a number. We only want insights that look at the average</span>
<span class="c1">// of Column A.</span>
<span class="kd">var</span> <span class="nx">insightActions</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'average'</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">columns</span><span class="p">:</span> <span class="nx">columns</span><span class="p">,</span> 
    <span class="na">insight_actions</span><span class="p">:</span> <span class="nx">insightActions</span><span class="p">,</span>
    <span class="na">single</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="s1">'some-source-slug'</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insights</span>
<span class="p">});</span>
</code></pre>

<p>Of course, just like with <code class="prettyprint">source</code> objects, you can also retrieve <code class="prettyprint">insight</code> objects by their slug or id. The slug can be found in the URL of the <code class="prettyprint">insight</code> when viewed through the UI. It&rsquo;s usually something like &ldquo;title-of-insight-1.&rdquo;</p>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API KEY'</span><span class="p">)</span>

<span class="c"># Get by id</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insight</span><span class="p">(</span><span class="mi">249985</span><span class="p">)</span>

<span class="c"># Get by slug</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insight</span><span class="p">(</span><span class="s">'some-slug'</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API KEY'</span><span class="p">)</span>


<span class="c1">// Get insight by id</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsight</span><span class="p">(</span><span class="mi">249985</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insight</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">insight</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Get insight by slug</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsight</span><span class="p">(</span><span class="s1">'some-slug'</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insight</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">insight</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "embed_url": "https://popily.com/widget/chart/align-hair/-/?style=compact-500-500&amp;app_id=18&amp;sig=8b7c8e557a9ab1bcf4d5d762dda773d2&amp;timestamp=1456113107",
    "x_label": "ALIGN",
    "y_label": "Number of Records",
    "filters_key": "",
    "source": 429,
    "title": "Number of ALIGN grouped by SEX",
    "insight_type_category": "count",
    "id": 249985,
    "z_label": "",
    "insight_type": "count_by_category_by_category"
}
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id or slug</td>
<td>string</td>
<td>Insight unique id</td>
</tr>
<tr>
<td>height</td>
<td>integer</td>
<td>Height in pixels (for displaying on a web page)</td>
</tr>
<tr>
<td>width</td>
<td>integer</td>
<td>Width in pixels (for display on a web page)</td>
</tr>
<tr>
<td>filters</td>
<td>JSON object</td>
<td>Filters applied to insight. See <a href="#filtering-chart-data">insight filters</a></td>
</tr>
<tr>
<td>full</td>
<td>string</td>
<td>If included will return x, y and z values</td>
</tr>
</tbody></table>

<h2 id="displaying-insights">Displaying insights</h2>

<p>Once you have retrieved an insight, you can add it to your web application by dropping it in an iframe. <strong>Note</strong>: a JavaScript library that you can use to attach responsive visualizations directly to your DOM elements is coming soon. </p>
<pre class="highlight html"><code><span class="nt">&lt;iframe</span> <span class="na">frameborder=</span><span class="s">"0"</span> <span class="na">height=</span><span class="s">"500"</span> <span class="na">width=</span><span class="s">"500"</span> <span class="na">src=</span><span class="s">"https://popily.com/widget/chart/hair-align-2/-/?style=compact-500-500&amp;app_id=18&amp;sig=63bb87883e20548076aefac271911c13&amp;timestamp=1456114892"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
</code></pre>

<h2 id="customize-display">Customize display</h2>

<p>When you retrieve an <code class="prettyprint">insight</code> you can also customize its display. Almost any aspect of a Popily visualization can be customized, including:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>The title of the chart</td>
</tr>
<tr>
<td>x_label</td>
<td>Text along the x axis</td>
</tr>
<tr>
<td>y_label</td>
<td>Text along the y axis</td>
</tr>
<tr>
<td>category_order</td>
<td>Order of bars in a bar chart. Options are: auto, asc, dsc, a-z, z-a</td>
</tr>
<tr>
<td>time_interval</td>
<td>minute, hour, day, week, month, year</td>
</tr>
</tbody></table>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API KEY'</span><span class="p">)</span>

<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'title'</span><span class="p">:</span> <span class="s">'Your title'</span><span class="p">,</span>
  <span class="s">'x_label'</span><span class="p">:</span> <span class="s">'Your X Label'</span><span class="p">,</span>
  <span class="s">'category_order'</span><span class="p">:</span> <span class="s">'z-a'</span>
<span class="p">}</span>

<span class="n">popily</span><span class="o">.</span><span class="n">get_insight</span><span class="p">(</span><span class="s">'some-slug'</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API KEY'</span><span class="p">)</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">title</span><span class="p">:</span> <span class="s1">'Your title'</span><span class="p">,</span>
  <span class="na">x_label</span><span class="p">:</span> <span class="s1">'Your x label'</span><span class="p">,</span>
  <span class="na">category_order</span><span class="p">:</span> <span class="s1">'z-a'</span>
<span class="p">};</span>

<span class="c1">// Get insight by slug</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsight</span><span class="p">(</span><span class="s1">'some-slug'</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insight</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">insight</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h2 id="filtering-insight-data">Filtering insight data</h2>

<p>Just like with lists of <code class="prettyprint">insight</code> objects, you can filter the data of a single <code class="prettyprint">insight</code>. See the <a href="#filtering-your-data">Filtering your data</a> section for details.</p>

<h2 id="refreshing-insight-data">Refreshing insight data</h2>

<p>Any <code class="prettyprint">insight</code> can be updated on a schedule, so it&rsquo;s automatically up to date when your data changes. Just set the <code class="prettyprint">refresh_rate</code> property to the number of hours between refreshes. For example a <code class="prettyprint">refresh_rate</code> of 24 would update once per day.</p>

<p>You only need to set the <code class="prettyprint">refresh_rate</code> once, however there is no harm in setting it more often than that. A <code class="prettyprint">refresh_rate</code> of 0 will stop your <code class="prettyprint">insight</code> from being automatically updated.</p>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API KEY'</span><span class="p">)</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insight</span><span class="p">(</span><span class="s">'some-slug'</span><span class="p">,</span> <span class="n">refresh_rate</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">// Node.js</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'popily'</span><span class="p">)(</span><span class="s1">'YOUR API TOKEN'</span><span class="p">);</span>

<span class="c1">// Browser</span>
<span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Popily</span><span class="p">(</span><span class="s1">'YOUR API KEY'</span><span class="p">)</span>

<span class="c1">// Get insight by slug</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">getInsight</span><span class="p">(</span><span class="s1">'some-slug'</span><span class="p">,</span> <span class="p">{</span><span class="na">refresh_rate</span><span class="p">:</span> <span class="mi">24</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insight</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">insight</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h1 id="users-endpoint">Users endpoint</h1>

<p>You can create user accounts to associate source and insight resources with specific users of your application. Your authentication token allows you to access the source and insight objects of any users you create.</p>

<h2 id="create-users">Create users</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://popily.com/api/users/'</span><span class="p">,</span>
                    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s">'username'</span><span class="p">:</span><span class="s">'testing'</span><span class="p">},</span>
                    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">YOUR</span> <span class="n">API</span> <span class="n">TOKEN</span><span class="o">&gt;</span><span class="p">})</span>
</code></pre>

<p>Create a user resource.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>json</td>
<td>JSON object</td>
<td>Arguments for user creation.</td>
</tr>
</tbody></table>

<p>Arguments are passed via a json object:</p>

<ul>
<li><strong>username:</strong> Username</li>
<li><strong>email:</strong> Email address. Optional for API, required for Popily.com.</li>
<li><strong>groups_member:</strong> List of groups to which the user belongs. Any user you create automatically belongs to your default group.</li>
</ul>

<h2 id="list-users">List users</h2>
<pre class="highlight python"><code><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://popily.com/api/users/'</span><span class="p">,</span>
                  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">YOUR</span> <span class="n">API</span> <span class="n">TOKEN</span><span class="o">&gt;</span><span class="p">})</span>
</code></pre>

<p>List all user resources associated with an API token.</p>

<h3 id="api-response-objects">API response objects</h3>

<ul>
<li><strong>id:</strong> UID of the User object.</li>
<li><strong>username:</strong> We&rsquo;ll force this to be unique when we create the User object.</li>
<li><strong>email:</strong> Email address. Optional for API, required for Popily.com.</li>
<li><strong>groups_member:</strong> List of groups to which the user belongs.</li>
</ul>

<h1 id="api-clients">API Clients</h1>

<h2 id="python">Python</h2>

<p>You can check out the official Popily client on <a href="https://pypi.python.org/pypi/popily-api/0.0.7">pypi</a> and <a href="https://github.com/popily/popily-api">GitHub</a>.</p>

<h2 id="javascript">JavaScript</h2>

<p>We&rsquo;ve written JavaScript clients for Node.js and the browser. You can check out the official Popily Node.js client on <a href="https://www.npmjs.com/package/popily">npm</a> and <a href="https://github.com/popily/popily-node">GitHub</a>, and the browser client on <a href="https://github.com/popily/popily-js">GitHub</a>.</p>

<h1 id="getting-help">Getting help</h1>

<p>We love developers because we <em>are</em> developers, so we made sure you can get help in the ways you want:</p>

<ul>
<li><strong>Slack:</strong> Ask a question in <a href="https://gentle-shore-82359.herokuapp.com/">our slack community room</a></li>
<li><strong>Twitter:</strong> <a href="https://twitter.com/popilyteam">@popilyteam</a>, <a href="https://twitter.com/jonathonmorgan">@jonathonmorgan</a>, <a href="https://twitter.com/chrisalbon">@chrisalbon</a></li>
<li><strong>Email:</strong> &#97;&#119;&#101;&#115;&#111;&#109;&#101;&#64;&#112;&#111;&#112;&#105;&#108;&#121;&#46;&#99;&#111;&#109;, &#106;&#111;&#110;&#97;&#116;&#104;&#111;&#110;&#64;&#112;&#111;&#112;&#105;&#108;&#121;&#46;&#99;&#111;&#109;, &#99;&#104;&#114;&#105;&#115;&#64;&#112;&#111;&#112;&#105;&#108;&#121;&#46;&#99;&#111;&#109;</li>
</ul>

<p>Code on!</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
    <!-- Google Analytics Code Start -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-61764668-3', 'auto');
      ga('send', 'pageview');

    </script>
    <!-- Google Analytics Code End -->
  </body>
</html>
