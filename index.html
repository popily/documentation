<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Popily API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;,&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="http">http</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://popily.com'>Live chat with us on Slack</a>!</li>
            <li><a href='http://popily.com'>Get an API key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Popily provides a powerful REST API for integrating embedded analytics into your application.</p>

<p>This API reference provides information on interacting with Popily&rsquo;s API endpoints.</p>

<h1 id="authentication">Authentication</h1>

<p>Popily&rsquo;s API supports authentication through an API key. <a href="#api-key">API keys</a> can be obtained through an account with Popily.</p>

<h2 id="api-key">API key</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://popily.com/api/sources/'</span><span class="p">,</span>
                    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">YOUR</span> <span class="n">TOKEN</span><span class="p">})</span>
</code></pre>

<p>You authenticate with Popily using a token passed in the Authorization HTTP header. If you haven&rsquo;t been assigned a token, please contact us and we&rsquo;ll hook you up.</p>

<p>Authentication includes an HTTP header <code class="prettyprint">Authorization: Token 12345</code>, so Popily knows who is making the request. We strongly recommend keeping this token to yourself, so think twice about making requests directly from your front-end code (even though that is technically possible).</p>

<h1 id="interacting-with-the-api">Interacting with the API</h1>

<h2 id="status-codes">Status codes</h2>

<table><thead>
<tr>
<th>Status Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>201</td>
<td>Resource Created</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
</tr>
</tbody></table>

<h2 id="making-requests">Making requests</h2>

<p>Popily follows RESTful API patterns.</p>

<ul>
<li><code class="prettyprint">GET</code> - Retrieve resources</li>
<li><code class="prettyprint">POST</code> - Create new resources</li>
<li><code class="prettyprint">PUT</code> - Modify existing resources</li>
<li><code class="prettyprint">DELETE</code> - Remove resources</li>
</ul>

<p><code class="prettyprint">GET</code> arguments must be passed as params and <code class="prettyprint">POST</code> arguments must be passed as JSON with correct Content-Type headers.</p>

<h2 id="pagination">Pagination</h2>

<p>Popily uses pagination when <code class="prettyprint">GET</code> requests returns a list of objects (e.g. insights, sources). To get all objects in a paginated list of objects, you will need to paginate through the list of objects.</p>

<h1 id="sources-endpoint">Sources endpoint</h1>

<p>The sources endpoint can be used to create new data sources or interact with existing sources. Resources in this endpoint are bound to user accounts for the sake of authentication.</p>

<h2 id="create-source">Create source</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily</span>

<span class="n">popily_api</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API TOKEN'</span><span class="p">)</span>

<span class="c"># Give it a title (optional)</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">'DC Comics Data'</span>

<span class="c"># Define the column types</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'name'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'rowlabel'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'ALIGN'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'EYE'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'HAIR'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'SEX'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="c"># Example connection to a database column called 'characters'</span>
<span class="n">connection_string</span> <span class="o">=</span> <span class="s">'mysql://username:password@host:port/database'</span>
<span class="n">query</span> <span class="o">=</span> <span class="s">'SELECT * FROM characters'</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily_api</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span>
                        <span class="n">connection_string</span><span class="o">=</span><span class="n">connection_string</span><span class="p">,</span>
                        <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</code></pre>

<p>A (data) source resource is data a user has added to Popily and can be populated from a file, a database connection, or a JSON API. When you add a source to Popily, we&rsquo;ll automatically create a resource, inspect the resource, perform some calculations, and make a sample space of insight resources that you can browse in the application UI (or retrieve via the insights endpoint).</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>Full URL where the data file or API endpoint can be accessed.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Human-readable name of the source.</td>
</tr>
<tr>
<td>columns</td>
<td>JSON object</td>
<td><a href="#data-types">A list of column headers and their data types</a>.</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>The type of data store providing data to the source: <em>e_csv</em> (CSV file accessed via URL) <em>e_xls</em> (Excel file accessed via URL) <em>e_json</em> (JSON accessed via URL) <em>sql</em> (results from SQL query). When absent, type is inferred.</td>
</tr>
<tr>
<td>sheetname</td>
<td>string</td>
<td>Used when the data source is an Excel file. Denotes the name of the sheet to use.</td>
</tr>
<tr>
<td>connection_string</td>
<td>string</td>
<td>Full connection string to your MySQL or Postgres database.</td>
</tr>
<tr>
<td>query</td>
<td>string</td>
<td>The SQL query you&rsquo;d like to run on your database.</td>
</tr>
</tbody></table>

<h2 id="source-data-types">Source data types</h2>

<blockquote>
<p>Here is an example of a JSON object for creating a new source. Note that the JSON object contains column header and column data type for every row in the data source.</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "url": "https://example.com/sales.csv",
    "title": "Sales Data",
    "columns": [
        {
            "column_header": "Date",
            "data_type": "datetime"
        },
        {
            "column_header": "Manager",
            "data_type": "category"
        },
        {
            "column_header": "Store ID",
            "data_type": "rowlabel"
        },
        {
            "column_header": "Sales",
            "data_type": "currency"
        },
    ]
}
</code></pre>

<p>All source resources in Popily must contain a description of the type of data in each column. Popily understands more than just integers and strings, it can also work with higher-level concepts like categories, US states or currency. We’re always adding to this list, but these are the available types as of today.</p>

<p>Note: You only need to define the columns you care about. Popily will ignore everything else.</p>

<table><thead>
<tr>
<th>Data Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>category</td>
<td>A column containing categorical values.</td>
<td>Apple, Orange, Pear</td>
</tr>
<tr>
<td>numeric</td>
<td>A column of numeric values.</td>
<td>320, 2, 23.10</td>
</tr>
<tr>
<td>currency</td>
<td>A column of numeric values as currencies.</td>
<td>$320, $2, $23.10</td>
</tr>
<tr>
<td>datetime</td>
<td>A column of datetime or timestamps.</td>
<td>12/12/2015, 2/3/15, January 6, 2015</td>
</tr>
<tr>
<td>country</td>
<td>A column of countries.</td>
<td>Spain, France, England</td>
</tr>
<tr>
<td>state</td>
<td>A column of US states.</td>
<td>Arizona, Maine, Oregon</td>
</tr>
<tr>
<td>coordinate</td>
<td>A column of latitude and longitude coordinate pairs.</td>
<td>[43.522, 23.521]</td>
</tr>
<tr>
<td>zipcode</td>
<td>A column of US Zip codes.</td>
<td>42351</td>
</tr>
<tr>
<td>rowlabel</td>
<td>A column of non-categorical uniquely or semi-uniquely identifying each individual row</td>
<td>Steve Jobs, Dunder Muffin, Wendy Jones</td>
</tr>
</tbody></table>

<h2 id="source-status">Source status</h2>

<p>When a source resource is added to Popily, our Mechanical Tukey technology starts processing the data. You can check the status of any source resource by looking at the source status:</p>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>inspecting</td>
<td>Examining new source.</td>
</tr>
<tr>
<td>calculating</td>
<td>Processing new source.</td>
</tr>
<tr>
<td>reinspecting</td>
<td>Reprocessing source after change.</td>
</tr>
<tr>
<td>Adding</td>
<td>Merging a source.</td>
</tr>
<tr>
<td>error</td>
<td>Something went wrong.</td>
</tr>
</tbody></table>

<h2 id="explore-source">Explore source</h2>

<blockquote>
<p>Example API response after creating a new source</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "id": 432,
    "explore_path": "/explore/source/dc-wikia-data-csv-3/discoveries/"
}
</code></pre>

<p>We’re exploring this data through the API, but once a data source has been added, you can also explore it through the Popily user interface. In the API response after you create a new data source, you’ll see an explore_path property, which is where you’ll find your new source via the interface.</p>

<h2 id="list-sources">List sources</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="c"># Get source with id 34242</span>
<span class="n">popily_api</span><span class="o">.</span><span class="n">get_sources</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{"count": 1,
 "next": "http://popily.com/api/sources/?page=2",
 "previous": None,
 "results": [{"columns": [{"column_header": "SEX",
             "data_type": "category",
             "id": 29413,
             "score": 0.0},
            {"column_header": "HAIR",
             "data_type": "category",
             "id": 29412,
             "score": 0.0},
            {"column_header": "EYE",
             "data_type": "category",
             "id": 29411,
             "score": 0.0},
            {"column_header": "ALIGN",
             "data_type": "category",
             "id": 29410,
             "score": 0.0},
            {"column_header": "name",
             "data_type": "rowlabel",
             "id": 29409,
             "score": 0.0}],
             "created_by": 3,
             "description": None,
             "explore_path": "/explore/source/dc-wikia-data-3/discoveries/",
             "id": 2287,
             "sheetname": None,
             "slug": "dc-wikia-data-3",
             "status": "inspecting",
             "title": "DC Comics Data",
             "url": None}]
}
</code></pre>

<p>Lists all source resources created by a user.</p>

<h3 id="api-response-objects">API response objects</h3>

<ul>
<li><strong>count:</strong> Number of source resources</li>
<li><strong>next:</strong> Pagination marker</li>
<li><strong>previous:</strong> Pagination marker</li>
<li><strong>results:</strong> (see <a href="#get_source">get_source</a> for full explanation)</li>
</ul>

<h1 id="insights-endpoint">Insights endpoint</h1>

<p>When <code class="prettyprint">source</code> resources are created in Popily, our Mechanical Turk technology creates a large sample space of relationships between columns. In Popily, each of these relationships is called an <code class="prettyprint">insight</code> and is represented by a <code class="prettyprint">chart</code>.</p>

<p>For most users, the workflow will be:</p>

<ol>
<li><a href="#get-insight">Retrieve the insight</a> for the desired relationship(s)</li>
<li><a href="#customize-chart">Customize the insight&rsquo;s chart</a> (e.g. removing values, datetime grouping)</li>
</ol>

<h2 id="list-insights">List insights</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="c"># Get insights about Column A and Column B from sourcev 34242</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="mi">324442</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'Column A'</span><span class="p">,</span><span class="s">'Column B'</span><span class="p">])</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "count": 1,
    "previous": null,
    "results": [{
        "title": "Number of ALIGN grouped by SEX",
        "x_label": "ALIGN",
        "y_label": "Number of Records",
        "filters_key": "",
        "source": 429,
        "insight_type_category": "count",
        "id": 249985,
        "z_label": "",
        "insight_type": "count_by_category_by_category"
    }],
    "next": null
}
</code></pre>

<p>Retrieves a list of insights for a source resource.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source</td>
<td>integer</td>
<td>id for the source.</td>
</tr>
<tr>
<td>columns</td>
<td>list</td>
<td>List of column names in a source.</td>
</tr>
<tr>
<td>insight_type</td>
<td>string</td>
<td>The type of analysis used in the insights.</td>
</tr>
</tbody></table>

<h2 id="get-insight">Get insight</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="c"># Get insight 249985</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insight</span><span class="p">(</span><span class="mi">249985</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "embed_url": "https://popily.com/widget/chart/align-hair/-/?style=compact-500-500&amp;app_id=18&amp;sig=8b7c8e557a9ab1bcf4d5d762dda773d2&amp;timestamp=1456113107",
    "x_label": "ALIGN",
    "y_label": "Number of Records",
    "filters_key": "",
    "source": 429,
    "title": "Number of ALIGN grouped by SEX",
    "insight_type_category": "count",
    "id": 249985,
    "z_label": "",
    "insight_type": "count_by_category_by_category"
}
</code></pre>

<p>Retrieves details on a single insight.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Insight UID</td>
<td></td>
</tr>
<tr>
<td>height</td>
<td>integer</td>
<td>Height in pixels</td>
<td></td>
</tr>
<tr>
<td>width</td>
<td>integer</td>
<td>Width in pixels</td>
<td></td>
</tr>
<tr>
<td>filters</td>
<td>JSON object</td>
<td>Data filters applied to insight. See <a href="#filtering-chart-data">insight filters</a>.</td>
<td></td>
</tr>
</tbody></table>

<p>If you want to visualize the data yourself you can get the x, y and z values (see the insight documentation for more details), or you can use the charts Popily generates for you via the insight’s embed_url property. Just drop it in an iframe:</p>

<p><code class="prettyprint">&lt;iframe frameborder=&quot;0&quot; height=&quot;500&quot; width=&quot;500&quot; src=&quot;https://popily.com/widget/chart/hair-align-2/-/?style=compact-500-500&amp;app_id=18&amp;sig=63bb87883e20548076aefac271911c13&amp;timestamp=1456114892&quot;&gt;&lt;/iframe&gt;</code></p>

<h2 id="customize-chart">Customize chart</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="c"># Customize insight 249985</span>
<span class="n">popily</span><span class="o">.</span><span class="n">customize_insight</span><span class="p">(</span><span class="mi">249985</span><span class="p">,</span>
                         <span class="n">title</span><span class="o">=</span><span class="s">'This Chart is Awesome'</span><span class="p">,</span>
                         <span class="n">x_label</span><span class="o">=</span><span class="s">'Goodness'</span><span class="p">,</span>
                         <span class="n">y_label</span><span class="o">=</span><span class="s">'Genders'</span><span class="p">,</span>
                         <span class="n">category_order</span><span class="o">=</span><span class="s">'z-a'</span><span class="p">)</span>
</code></pre>

<p>Customize the display of a single insight. Note, currently customizations are bound to an insight and thus an insight can only have a single customization.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Custom chart title</td>
</tr>
<tr>
<td>x_label</td>
<td>string</td>
<td>Custom x label</td>
</tr>
<tr>
<td>y_label</td>
<td>string</td>
<td>Custom y label</td>
</tr>
<tr>
<td>category_order</td>
<td>string</td>
<td>Custom ordering of categories. Allowed values: &lsquo;a-z&rsquo;, &#39;z-a&rsquo;, &#39;asc&rsquo;, and &#39;dsc&rsquo;</td>
</tr>
</tbody></table>

<h2 id="filtering-chart-data">Filtering chart data</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">popily_api</span>

<span class="n">filters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'column'</span><span class="p">:</span> <span class="s">'SEX'</span><span class="p">,</span>
        <span class="s">'values'</span><span class="p">:</span> <span class="p">[</span><span class="s">'Genderless Characters'</span><span class="p">,</span><span class="s">'Transgender Characters'</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>

<span class="n">insight</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">get_insight</span><span class="p">(</span><span class="mi">249985</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
</code></pre>

<p>Sometimes you want to tell a more specific story. With Popily you can apply filters to any insight or list or insights, and then assign customizations that are specific to the filters you’ve applied. Filters allow you to control the data within a relationship insight.</p>

<p>Example filter param to include only &#39;Genderless Characters&rsquo; and &#39;Transgender Characters&rsquo; in a column titled <code class="prettyprint">SEX</code>:</p>

<p><code class="prettyprint">[
    {
        &#39;column&#39;: &#39;SEX&#39;,
        &#39;values&#39;: [&#39;Genderless Characters&#39;,&#39;Transgender Characters&#39;]
    }
]</code></p>

<h1 id="users-endpoint">Users endpoint</h1>

<p>You can create user accounts to associate source and insight resources with specific users of your application. Your authentication token allows you to access the source and insight objects of any users you create.</p>

<h2 id="create-users">Create users</h2>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://popily.com/api/users/'</span><span class="p">,</span>
                    <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s">'username'</span><span class="p">:</span><span class="s">'testing'</span><span class="p">},</span>
                    <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">YOUR</span> <span class="n">API</span> <span class="n">TOKEN</span><span class="o">&gt;</span><span class="p">})</span>
</code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>json</td>
<td>JSON object</td>
<td>Arguments for user creation.</td>
</tr>
</tbody></table>

<p>Create a user resource. Arguments are passed via a json object:</p>

<ul>
<li><strong>username:</strong> Username</li>
<li><strong>email:</strong> Email address. Optional for API, required for Popily.com.</li>
<li><strong>groups_member:</strong> List of groups to which the user belongs. Any user you create automatically belongs to your default group.</li>
</ul>

<h2 id="list-users">List users</h2>
<pre class="highlight python"><code><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://popily.com/api/users/'</span><span class="p">,</span>
                  <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="o">&lt;</span><span class="n">YOUR</span> <span class="n">API</span> <span class="n">TOKEN</span><span class="o">&gt;</span><span class="p">})</span>
</code></pre>

<p>List all user resources associated with an API token.</p>

<h3 id="api-response-objects">API response objects</h3>

<ul>
<li><strong>id:</strong> UID of the User object.</li>
<li><strong>username:</strong> We&rsquo;ll force this to be unique when we create the User object.</li>
<li><strong>email:</strong> Email address. Optional for API, required for Popily.com.</li>
<li><strong>groups_member:</strong> List of groups to which the user belongs.</li>
</ul>

<h1 id="python-client">Python client</h1>

<p>We love Python so we couldn&rsquo;t help but make an official Popily client for Python. You can check it out on <a href="https://pypi.python.org/pypi/popily-api/0.0.6">pypi</a> and <a href="https://github.com/popily/popily-api">GitHub</a>.</p>

<h2 id="install-client">Install client</h2>
<pre class="highlight python"><code><span class="n">pip</span> <span class="n">install</span> <span class="n">popily</span><span class="o">-</span><span class="n">api</span>
</code></pre>

<p>Installing the Popily API client is easy with the package manager <a href="https://pypi.python.org/pypi/pip">pip</a>.</p>

<h2 id="upgrade-client">Upgrade client</h2>
<pre class="highlight python"><code><span class="n">pip</span> <span class="n">install</span> <span class="n">popily</span><span class="o">-</span><span class="n">api</span> <span class="o">--</span><span class="n">upgrade</span>
</code></pre>

<p>Upgrading the client can be accomplished with the <code class="prettyprint">-upgrade</code> argument.</p>

<h2 id="add_source">add_source</h2>
<pre class="highlight python"><code>
<span class="c"># Three examples of add_source</span>

<span class="kn">import</span> <span class="nn">popily_api</span>

<span class="n">popily</span> <span class="o">=</span> <span class="n">popily_api</span><span class="o">.</span><span class="n">Popily</span><span class="p">(</span><span class="s">'YOUR API TOKEN'</span><span class="p">)</span>

<span class="c"># Give it a title (optional)</span>
<span class="n">title</span> <span class="o">=</span> <span class="s">'DC Comics Data'</span>

<span class="c"># Define the column types</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'name'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'rowlabel'</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s">'column_header'</span><span class="p">:</span> <span class="s">'HAIR'</span><span class="p">,</span>
        <span class="s">'data_type'</span><span class="p">:</span> <span class="s">'category'</span>
    <span class="p">},</span>
<span class="p">]</span>

<span class="c"># If the data is in a CSV file locally</span>
<span class="n">file_data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'data'</span><span class="p">:</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/path/to/the/file.csv'</span><span class="p">)}</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">file_obj</span><span class="o">=</span><span class="n">file_data</span><span class="p">,</span>
                                <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

<span class="c"># If the dataset is remote</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://example.com/dataset.csv'</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>

<span class="c"># If the data is from an SQL query</span>
<span class="n">connection_string</span> <span class="o">=</span> <span class="s">'mysql://username:password@host:port/database'</span>
<span class="n">query</span> <span class="o">=</span> <span class="s">'SELECT * FROM TableA'</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span>
                        <span class="n">connection_string</span><span class="o">=</span><span class="n">connection_string</span><span class="p">,</span>
                        <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
</code></pre>

<p>Creates a new data source resource in Popily.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>Full URL where the data file or API endpoint can be accessed.</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Human-readable name of the source.</td>
</tr>
<tr>
<td>columns</td>
<td>JSON object</td>
<td><a href="#data-types">A list of column headers and their data types</a>.</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>The type of data store providing data to the source: <em>e_csv</em> (CSV file accessed via URL) <em>e_xls</em> (Excel file accessed via URL) <em>e_json</em> (JSON accessed via URL) <em>sql</em> (results from SQL query). When absent, type is inferred.</td>
</tr>
<tr>
<td>sheetname</td>
<td>string</td>
<td>Used when the data source is an Excel file. Denotes the name of the sheet to use.</td>
</tr>
<tr>
<td>connection_string</td>
<td>string</td>
<td>Full connection string to your MySQL or Postgres database.</td>
</tr>
<tr>
<td>query</td>
<td>string</td>
<td>The SQL query you&rsquo;d like to run on your database.</td>
</tr>
</tbody></table>

<h2 id="get_sources">get_sources</h2>
<pre class="highlight python"><code><span class="c"># Get source with id 34242</span>
<span class="n">popily_api</span><span class="o">.</span><span class="n">get_sources</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{"count": 1,
 "next": "http://popily.com/api/sources/?page=2",
 "previous": None,
 "results": [{"columns": [{"column_header": "SEX",
             "data_type": "category",
             "id": 29413,
             "score": 0.0},
            {"column_header": "HAIR",
             "data_type": "category",
             "id": 29412,
             "score": 0.0},
            {"column_header": "EYE",
             "data_type": "category",
             "id": 29411,
             "score": 0.0},
            {"column_header": "ALIGN",
             "data_type": "category",
             "id": 29410,
             "score": 0.0},
            {"column_header": "name",
             "data_type": "rowlabel",
             "id": 29409,
             "score": 0.0}],
             "created_by": 3,
             "description": None,
             "explore_path": "/explore/source/dc-wikia-data-3/discoveries/",
             "id": 2287,
             "sheetname": None,
             "slug": "dc-wikia-data-3",
             "status": "inspecting",
             "title": "DC Comics Data",
             "url": None}]
}
</code></pre>

<p>Lists all source resources created by a user.</p>

<h3 id="api-response-objects">API response objects</h3>

<ul>
<li><strong>count:</strong> Number of source resources</li>
<li><strong>next:</strong> Pagination marker</li>
<li><strong>previous:</strong> Pagination marker</li>
<li><strong>results:</strong> (see <a href="#get_source">get_source</a> for full explanation)</li>
</ul>

<h2 id="get_source">get_source</h2>
<pre class="highlight python"><code><span class="c"># Get source with id 34242</span>
<span class="n">popily_api</span><span class="o">.</span><span class="n">get_source</span><span class="p">(</span><span class="mi">34242</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "columns": [{"column_header": "HAIR",
              "data_type": "category",
              "id": 29382,
              "score": 0.183804993880959},
              {"column_header": "ALIGN",
               "data_type": "category",
               "id": 29380,
               "score": 0.17228792581526},
              {"column_header": "SEX",
               "data_type": "category",
               "id": 29383,
               "score": 0.157287131801953},
              {"column_header": "EYE",
               "data_type": "category",
               "id": 29381,
               "score": 0.113107718497747},
              {"column_header": "name",
               "data_type": "rowlabel",
               "id": 29379,
               "score": 0.0}],
  "created_by": 3,
  "description": None,
  "explore_path": u"/explore/source/dc-wikia-data/discoveries/",
  "id": 2279,
  "sheetname": None,
  "slug": "dc-wikia-data",
  "status": "finished",
  "title": "DC Comics Data",
  "url": None
}
</code></pre>

<p>Retrieves details on an individual source resource.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source</td>
<td>integer</td>
<td>id for the source.</td>
</tr>
</tbody></table>

<h3 id="api-response-objects">API response objects</h3>

<ul>
<li><strong>id:</strong> Source UID</li>
<li><strong>url:</strong> Full URL where the data file or API endpoint can be accessed)</li>
<li><strong>slug:</strong> Unique slug of the source resource</li>
<li><strong>title:</strong> Human-readable name</li>
<li><strong>description:</strong> Human-readable description</li>
<li><strong>columns:</strong> List of columns

<ul>
<li><strong>column_header:</strong> Title of column</li>
<li><strong>data_type:</strong> Type of data in column (<a href="#source-data-types">see source data types</a>)</li>
<li><strong>id:</strong> Column UID</li>
<li><strong>score:</strong> &ldquo;Interestingness&rdquo; score (used in some rankings)</li>
</ul></li>
<li><strong>created_by:</strong> UID of creating user</li>
<li><strong>status:</strong> Status of source resource

<ul>
<li><strong>inspecting:</strong> Initial inspection</li>
<li><strong>calculating:</strong> Processing underway</li>
<li><strong>reinspecting:</strong> Secondary inspection</li>
</ul></li>
<li><strong>type:</strong> Type of data used to create source resource

<ul>
<li><strong>e_csv:</strong> CSV file accessed via URL</li>
<li><strong>e_xls:</strong> Excel file accessed via URL</li>
<li><strong>e_json:</strong> JSON accessed via URL</li>
<li><strong>sql:</strong> Results from SQL query</li>
</ul></li>
<li><strong>sheetname:</strong> Used when working from Excel files with more than one sheet</li>
<li><strong>connection_string:</strong> Full connection string to your MySQL or Postgres database</li>
<li><strong>query:</strong> SQL query you&rsquo;d like to run on your database</li>
</ul>

<h2 id="get_insights">get_insights</h2>
<pre class="highlight python"><code><span class="c"># Get insights about Column A and Column B from sourcev 34242</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insights</span><span class="p">(</span><span class="mi">324442</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'Column A'</span><span class="p">,</span><span class="s">'Column B'</span><span class="p">])</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "count": 1,
    "previous": null,
    "results": [{
        "title": "Number of ALIGN grouped by SEX",
        "x_label": "ALIGN",
        "y_label": "Number of Records",
        "filters_key": "",
        "source": 429,
        "insight_type_category": "count",
        "id": 249985,
        "z_label": "",
        "insight_type": "count_by_category_by_category"
    }],
    "next": null
}
</code></pre>

<p>Retrieves a list of insights for a source resource.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>source</td>
<td>integer</td>
<td>id for the source.</td>
</tr>
<tr>
<td>columns</td>
<td>list</td>
<td>List of column names in a source.</td>
</tr>
<tr>
<td>insight_type</td>
<td>string</td>
<td>The type of analysis used in the insights.</td>
</tr>
</tbody></table>

<h2 id="get_insight">get_insight</h2>
<pre class="highlight python"><code><span class="c"># Get insight 249985</span>
<span class="n">popily</span><span class="o">.</span><span class="n">get_insight</span><span class="p">(</span><span class="mi">249985</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>Example API response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "embed_url": "https://popily.com/widget/chart/align-hair/-/?style=compact-500-500&amp;app_id=18&amp;sig=8b7c8e557a9ab1bcf4d5d762dda773d2&amp;timestamp=1456113107",
    "x_label": "ALIGN",
    "y_label": "Number of Records",
    "filters_key": "",
    "source": 429,
    "title": "Number of ALIGN grouped by SEX",
    "insight_type_category": "count",
    "id": 249985,
    "z_label": "",
    "insight_type": "count_by_category_by_category"
}
</code></pre>

<p>Retrieves details on a single insight.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Insight UID</td>
<td></td>
</tr>
<tr>
<td>height</td>
<td>integer</td>
<td>Height in pixels</td>
<td></td>
</tr>
<tr>
<td>width</td>
<td>integer</td>
<td>Width in pixels</td>
<td></td>
</tr>
<tr>
<td>filters</td>
<td>JSON object</td>
<td>Data filters applied to insight. See <a href="#filtering-chart-data">insight filters</a>.</td>
<td></td>
</tr>
</tbody></table>

<p>If you want to visualize the data yourself you can get the x, y and z values (see the insight documentation for more details), or you can use the charts Popily generates for you via the insight’s embed_url property. Just drop it in an iframe:</p>

<p><code class="prettyprint">&lt;iframe frameborder=&quot;0&quot; height=&quot;500&quot; width=&quot;500&quot; src=&quot;https://popily.com/widget/chart/hair-align-2/-/?style=compact-500-500&amp;app_id=18&amp;sig=63bb87883e20548076aefac271911c13&amp;timestamp=1456114892&quot;&gt;&lt;/iframe&gt;</code></p>

<h2 id="customize_insight">customize_insight</h2>
<pre class="highlight python"><code><span class="c"># Customize insight 249985</span>
<span class="n">popily</span><span class="o">.</span><span class="n">customize_insight</span><span class="p">(</span><span class="mi">249985</span><span class="p">,</span>
                         <span class="n">title</span><span class="o">=</span><span class="s">'This Chart is Awesome'</span><span class="p">,</span>
                         <span class="n">x_label</span><span class="o">=</span><span class="s">'Goodness'</span><span class="p">,</span>
                         <span class="n">y_label</span><span class="o">=</span><span class="s">'Genders'</span><span class="p">,</span>
                         <span class="n">category_order</span><span class="o">=</span><span class="s">'z-a'</span><span class="p">)</span>
</code></pre>

<p>Customize the display of a single insight. Note, currently customizations are bound to an insight and thus an insight can only have a single customization.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Custom chart title</td>
</tr>
<tr>
<td>x_label</td>
<td>string</td>
<td>Custom x label</td>
</tr>
<tr>
<td>y_label</td>
<td>string</td>
<td>Custom y label</td>
</tr>
<tr>
<td>category_order</td>
<td>string</td>
<td>Custom ordering of categories. Allowed values: &#39;a-z&rsquo;, &#39;z-a&rsquo;, &#39;asc&rsquo;, and &#39;dsc&rsquo;</td>
</tr>
</tbody></table>

<h1 id="getting-help">Getting help</h1>

<p>We love developers because we <em>are</em> developers, so we made sure you can get help in the ways you want:</p>

<ul>
<li><strong>Slack:</strong> Ask a question in our slack community room</li>
<li><strong>Twitter:</strong> <a href="https://twitter.com/popilyteam">@popilyteam</a>, <a href="https://twitter.com/jonathonmorgan">@jonathonmorgan</a>, <a href="https://twitter.com/chrisalbon">@chrisalbon</a></li>
<li><strong>Email:</strong> &#97;&#119;&#101;&#115;&#111;&#109;&#101;&#64;&#112;&#111;&#112;&#105;&#108;&#121;&#46;&#99;&#111;&#109;, &#106;&#111;&#110;&#97;&#116;&#104;&#111;&#110;&#64;&#112;&#111;&#112;&#105;&#108;&#121;&#46;&#99;&#111;&#109;, &#99;&#104;&#114;&#105;&#115;&#64;&#112;&#111;&#112;&#105;&#108;&#121;&#46;&#99;&#111;&#109;</li>
</ul>

<p>Code on!</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="http">http</a>
          </div>
      </div>
    </div>
  </body>
</html>
